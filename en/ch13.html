<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <style>
      :root {
        --c-bg: #fff;
      }

      html.dark {
        --c-bg: #22272e;
      }

      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.classList.toggle('dark', true)
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>Chapter 13 Comments Should Describe Things that Aren’t Obvious from the Code | A Philosophy of Software Design</title><meta name="description" content="">
    <link rel="preload" href="/aposd-zh/assets/style-CXidThWE.css" as="style"><link rel="stylesheet" href="/aposd-zh/assets/style-CXidThWE.css">
    <link rel="modulepreload" href="/aposd-zh/assets/app-DGwXItXW.js"><link rel="modulepreload" href="/aposd-zh/assets/ch13.html-BMLX-zzN.js">
    <link rel="prefetch" href="/aposd-zh/assets/index.html-RSDb3W8F.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch01.html-BU_U9n85.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch02.html-CKSzhxtc.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch03.html-DL70c72z.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch04.html-C_hW-qzU.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch05.html-BW-DjEi2.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch06.html-Do4AGxmu.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch07.html-CzNf4cXj.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch08.html-BcFesMSS.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch09.html-BlJBc20s.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch10.html-CH5K3sFx.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch11.html-CC9CL5Fq.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch12.html-CsC0kLbj.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch13.html-Bq2ac5W4.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch14.html-B_N42CFx.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch15.html-KUoF_XOO.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch16.html-CXYCYIXi.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch17.html-rh31k9ik.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch18.html-B1Jwglgj.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch19.html-BdmCnQBC.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch20.html-QApZ53CU.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch21.html-TjnWkr4e.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/preface.html-UYOw3tBA.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/summary.html-D9_cKf_e.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/index.html-3K5YP_WG.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch01.html-Be3d9j8j.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch02.html-YNTZP5SO.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch03.html-D3rR11fe.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch04.html-zrA-Y1pX.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch05.html-Dy-_aiDp.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch06.html-DAb61dMh.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch07.html-CY0cGB9L.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch08.html-kx4zFreq.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch09.html-o91_Dmlm.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch10.html-DCuBvP5o.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch11.html-U__L6igd.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch12.html-BWDkP9wr.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch14.html-H9gwCVG6.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch15.html-BbDRPVlu.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch16.html-DNYCZ4Jn.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch17.html-CNBnlYus.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch18.html-_LPkvhBp.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch19.html-DUYmmqCV.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch20.html-CAiuTurh.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch21.html-DMu8xOUB.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/preface.html-z1C45fIv.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/summary.html-Dbyhm99A.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/index.html-COj5-peY.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch01.html-chHJGmpw.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch02.html-BtPy2BTq.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch03.html-CpIuq9kQ.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch04.html-C-Kjt6z1.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch05.html-FLKdqy8T.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch06.html-BrANMz3N.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch07.html-CpqO3jbQ.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch08.html-D1A9EscU.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch09.html-CbFbqaRC.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch10.html-C9X0shEl.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch11.html-3H734ROP.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch12.html-Q0goVRO3.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch13.html-9LZ9nn8u.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch14.html-BoT6z4QF.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch15.html-C0n7U4US.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch16.html-DMWP3UAT.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch17.html-BDKkQkgp.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch18.html-gOArL73q.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch19.html-HAuo9zQm.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch20.html-DRy7i93K.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch21.html--4xjvf7Q.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/preface.html-DJYXuDnJ.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/summary.html-CZebq1HG.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/404.html-C-72-Azt.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container no-sidebar external-link-icon"><!--[--><header class="vp-navbar"><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/aposd-zh/en/"><!----><span class="vp-site-name" aria-hidden="true">A Philosophy of Software Design</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/aposd-zh/ch13.html" aria-label="简体中文"><!---->简体中文<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/aposd-zh/en/ch13.html" aria-label="English"><!---->English<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/aposd-zh/zh-tw/ch13.html" aria-label="繁体中文"><!---->繁体中文<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/yingang/aposd-zh" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><button class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar"><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/aposd-zh/ch13.html" aria-label="简体中文"><!---->简体中文<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/aposd-zh/en/ch13.html" aria-label="English"><!---->English<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/aposd-zh/zh-tw/ch13.html" aria-label="繁体中文"><!---->繁体中文<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/yingang/aposd-zh" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><!----><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="chapter-13-comments-should-describe-things-that-aren-t-obvious-from-the-code" tabindex="-1"><a class="header-anchor" href="#chapter-13-comments-should-describe-things-that-aren-t-obvious-from-the-code"><span>Chapter 13 Comments Should Describe Things that Aren’t Obvious from the Code</span></a></h1><p>The reason for writing comments is that statements in a programming language can’t capture all of the important information that was in the mind of the developer when the code was written. Comments record this information so that developers who come along later can easily understand and modify the code. The guiding principle for comments is that comments should describe things that aren’t obvious from the code.</p><p>There are many things that aren’t obvious from the code. Sometimes it’s low-level details that aren’t obvious. For example, when a pair of indices describe a range, it isn’t obvious whether the elements given by the indices are inside the range or out. Sometimes it’s not clear why code is needed, or why it was implemented in a particular way. Sometimes there are rules the developer followed, such as “always invoke a before b.” You might be able to guess at a rule by looking at all of the code, but this is painful and error-prone; a comment can make the rule explicit and clear.</p><p>One of the most important reasons for comments is abstractions, which include a lot of information that isn’t obvious from the code. The idea of an abstraction is to provide a simple way of thinking about something, but code is so detailed that it can be hard to see the abstraction just from reading the code. Comments can provide a simpler, higher-level view (“after this method is invoked, network traffic will be limited to maxBandwidth bytes per second”). Even if this information can be deduced by reading the code, we don’t want to force users of a module to do that: reading the code is time-consuming and forces them to consider a lot of information that isn’t needed to use the module. Developers should be able to understand the abstraction provided by a module without reading any code other than its externally visible declarations. The only way to do this is by supplementing the declarations with comments.</p><p>This chapter discusses what information needs to be described in comments and how to write good comments. As you will see, good comments typically explain things at a different level of detail than the code, which is more detailed in some situations and less detailed (more abstract) in others.</p><h2 id="_13-1-pick-conventions" tabindex="-1"><a class="header-anchor" href="#_13-1-pick-conventions"><span>13.1 Pick conventions</span></a></h2><h2 id="_13-2-don-t-repeat-the-code" tabindex="-1"><a class="header-anchor" href="#_13-2-don-t-repeat-the-code"><span>13.2 Don’t repeat the code</span></a></h2><h2 id="_13-3-lower-level-comments-add-precision" tabindex="-1"><a class="header-anchor" href="#_13-3-lower-level-comments-add-precision"><span>13.3 Lower-level comments add precision</span></a></h2><h2 id="_13-4-higher-level-comments-enhance-intuition" tabindex="-1"><a class="header-anchor" href="#_13-4-higher-level-comments-enhance-intuition"><span>13.4 Higher-level comments enhance intuition</span></a></h2><h2 id="_13-5-interface-documentation" tabindex="-1"><a class="header-anchor" href="#_13-5-interface-documentation"><span>13.5 Interface documentation</span></a></h2><h2 id="_13-6-implementation-comments-what-and-why-not-how" tabindex="-1"><a class="header-anchor" href="#_13-6-implementation-comments-what-and-why-not-how"><span>13.6 Implementation comments: what and why, not how</span></a></h2><h2 id="_13-7-cross-module-design-decisions" tabindex="-1"><a class="header-anchor" href="#_13-7-cross-module-design-decisions"><span>13.7 Cross-module design decisions</span></a></h2><h2 id="_13-8-conclusion" tabindex="-1"><a class="header-anchor" href="#_13-8-conclusion"><span>13.8 Conclusion</span></a></h2><p>The goal of comments is to ensure that the structure and behavior of the system is obvious to readers, so they can quickly find the information they need and make modifications to the system with confidence that they will work. Some of this information can be represented in the code in a way that will already be obvious to readers, but there is a significant amount of information that can’t easily be deduced from the code. Comments fill in this information.</p><p>When following the rule that comments should describe things that aren’t obvious from the code, “obvious” is from the perspective of someone reading your code for the first time (not you). When writing comments, try to put yourself in the mindset of the reader and ask yourself what are the key things he or she will need to know. If your code is undergoing review and a reviewer tells you that something is not obvious, don’t argue with them; if a reader thinks it’s not obvious, then it’s not obvious. Instead of arguing, try to understand what they found confusing and see if you can clarify that, either with better comments or better code.</p><h2 id="_13-9-answers-to-questions-from-section-13-5" tabindex="-1"><a class="header-anchor" href="#_13-9-answers-to-questions-from-section-13-5"><span>13.9 Answers to questions from Section 13.5</span></a></h2></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><!----></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/aposd-zh/assets/app-DGwXItXW.js" defer></script>
  </body>
</html>
